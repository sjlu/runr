var a=function(){function d(a){$("#location .title span").html(a),c()}function e(){$("#location .title span").html("Couldn't grab your current location :(")}function f(b,c){a.current_location.lat=b,a.current_location.lon=c}function g(b){var c=new google.maps.Geocoder;c.geocode(b,function(b,c){if(c!=google.maps.GeocoderStatus.OK)return e();if(b[1])b=b[1];else if(b[0])b=b[0];else return e();d(b.formatted_address),a.current_location.lat||f(b.geometry.location.lat(),b.geometry.location.lng())})}function h(a,b){f(a,b);var c=new google.maps.LatLng(a,b);g({"latLng":c})}function i(b){a.current_location={},g({"address":b})}function j(a){h(a.coords.latitude,a.coords.longitude)}function k(a){c=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(j,e):e()}var a={},b="http://maps.googleapis.com/maps/api/",c=function(){};return a.current_location={},a.geolocation=i,a.init=k,a},b=function(){function e(){return c}function g(){return b}function h(){$("#input").effect("shake",{"times":3},75).removeAttr("disabled").addClass("error"),setTimeout(function(){$("#input").removeClass("error")},2e3)}function i(a){$("#input").attr("value","").removeAttr("disabled"),$("#items ul").prepend($('<li data-term="'+a+'">'+a+'<i class="icon-remove" data-term="'+a+'"></i></li>').hide().fadeIn("slow")),$(".icon-remove").click(function(){$(".icon-remove").unbind(),l($(this).attr("data-term"))}),c.length>0?$("#button").fadeIn():$("#button").fadeOut()}function j(a,d){a=a.query.results.Result,c.push(d);for(var e in a){var f=a[e],g={"lat":f.Latitude,"lon":f.Longitude,"name":f.Title,"category":d,"result":f};b.push(g)}}function k(a){var b=d.current_location.lat,c=d.current_location.lon;YUI().use("node","yql",function(d){d.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+b+'" and longitude="'+c+'"',function(b){if(!b.query.results||b.query.results.count==0){h();return}j(b,a),i(a)})})}function l(a){for(var d in c)c[d]==a&&c.splice(d,1);for(var d in b)b[d].category==a&&b.splice(d,1);$('li[data-term="'+a+'"]').fadeOut(function(){$(this).remove()})}function m(){$("#input").unbind().keydown(function(a){a.keyCode==13&&($("#input").attr("disabled","disabled"),k(this.value))}),$("#button").unbind().click(function(){f.request()})}var a={},b=[],c=[];return a.get_categories=e,a.get_list=g,a.search=k,a.init=m,a},c=function(){function c(a){a=a[0];var b=66;for(var c=1;c<a.locations.length;c++){var d=a.locations[c].result.Address+"<br />"+a.locations[c].result.City+", "+a.locations[c].result.State,e=a.locations[c].name;$("#places-container ul").append('<li><span class="number">'+String.fromCharCode(b)+'</span><i class="icon-map-marker"></i><span class="title">'+e+'</span><span class="address">'+d+"</span></li>"),b++}var f=a.locations.pop(),g=a.locations.shift(),h={"center":new google.maps.LatLng(Number(g.lat),Number(g.lon)),"zoom":13,"mapTypeId":google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map"),h),j=new google.maps.DirectionsService,k=new google.maps.DirectionsRenderer;k.setMap(i);var l={"origin":new google.maps.LatLng(Number(g.lat),Number(g.lon)),"destination":new google.maps.LatLng(Number(f.lat),Number(f.lon)),"travelMode":google.maps.TravelMode.WALKING,"unitSystem":google.maps.UnitSystem.IMPERIAL,"waypoints":[]};for(var c=a.locations.length-1;c>=0;c--)l.waypoints.push({"location":new google.maps.LatLng(Number(a.locations[c].lat),Number(a.locations[c].lon)),"stopover":!0});j.route(l,function(a,b){b==google.maps.DirectionsStatus.OK&&k.setDirections(a)}),$("#map").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").fadeIn(),$("html, body").animate({"scrollTop":$(document).height()},"slow")}function f(){$.post(b+"/route",{"locations":JSON.stringify(e.get_list()),"categories":JSON.stringify(e.get_categories()),"start":JSON.stringify(d.current_location)},c,"json")}function g(){}var a={},b="/api";return a.request=f,a.init=g,a},d=new a,e=new b,f=new c;$(document).ready(function(){d.init(function(){e.init()}),$(window).resize(function(){$("#map").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").css("height",window.innerHeight).css("width",window.innerWidth),$("html, body").animate({"scrollTop":$(document).height()},"slow")})});var g=function(){function a(a){$("#location .title span").html(a),k()}function b(){$("#location .title span").html("Couldn't grab your current location :(")}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();a(d.formatted_address),i.current_location.lat||c(d.geometry.location.lat(),d.geometry.location.lng())})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){i.current_location={},d({"address":a})}function g(a){e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},h=function(){function a(){return m}function b(){return k}function c(){$("#input").effect("shake",{"times":3},75).removeAttr("disabled").addClass("error"),setTimeout(function(){$("#input").removeClass("error")},2e3)}function d(a){$("#input").attr("value","").removeAttr("disabled"),$("#items ul").prepend($('<li data-term="'+a+'">'+a+'<i class="icon-remove" data-term="'+a+'"></i></li>').hide().fadeIn("slow")),$(".icon-remove").click(function(){$(".icon-remove").unbind(),g($(this).attr("data-term"))}),m.length>0?$("#button").fadeIn():$("#button").fadeOut()}function e(a,b){a=a.query.results.Result,m.push(b);for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};k.push(e)}}function f(a){var b=j.current_location.lat,f=j.current_location.lon;YUI().use("node","yql",function(g){g.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+b+'" and longitude="'+f+'"',function(b){if(!b.query.results||b.query.results.count==0){c();return}e(b,a),d(a)})})}function g(a){for(var b in m)m[b]==a&&m.splice(b,1);for(var b in k)k[b].category==a&&k.splice(b,1);$('li[data-term="'+a+'"]').fadeOut(function(){$(this).remove()})}function h(){$("#input").unbind().keydown(function(a){a.keyCode==13&&($("#input").attr("disabled","disabled"),f(this.value))}),$("#button").unbind().click(function(){l.request()})}var i={},k=[],m=[];return i.get_categories=a,i.get_list=b,i.search=f,i.init=h,i},i=function(){function a(a){a=a[0];var b=66;for(var c=1;c<a.locations.length;c++){var d=a.locations[c].result.Address+"<br />"+a.locations[c].result.City+", "+a.locations[c].result.State,e=a.locations[c].name;$("#places-container ul").append('<li><span class="number">'+String.fromCharCode(b)+'</span><i class="icon-map-marker"></i><span class="title">'+e+'</span><span class="address">'+d+"</span></li>"),b++}var f=a.locations.pop(),g=a.locations.shift(),h={"center":new google.maps.LatLng(Number(g.lat),Number(g.lon)),"zoom":13,"mapTypeId":google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map"),h),j=new google.maps.DirectionsService,k=new google.maps.DirectionsRenderer;k.setMap(i);var l={"origin":new google.maps.LatLng(Number(g.lat),Number(g.lon)),"destination":new google.maps.LatLng(Number(f.lat),Number(f.lon)),"travelMode":google.maps.TravelMode.WALKING,"unitSystem":google.maps.UnitSystem.IMPERIAL,"waypoints":[]};for(var c=a.locations.length-1;c>=0;c--)l.waypoints.push({"location":new google.maps.LatLng(Number(a.locations[c].lat),Number(a.locations[c].lon)),"stopover":!0});j.route(l,function(a,b){b==google.maps.DirectionsStatus.OK&&k.setDirections(a)}),$("#map").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").fadeIn(),$("html, body").animate({"scrollTop":$(document).height()},"slow")}function b(){$.post(e+"/route",{"locations":JSON.stringify(k.get_list()),"categories":JSON.stringify(k.get_categories()),"start":JSON.stringify(j.current_location)},a,"json")}function c(){}var d={},e="/api";return d.request=b,d.init=c,d},j=new g,k=new h,l=new i;$(document).ready(function(){j.init(function(){k.init()}),$(window).resize(function(){$("#map").css("height",window.innerHeight).css("width",window.innerWidth),$("#results").css("height",window.innerHeight).css("width",window.innerWidth),$("html, body").animate({"scrollTop":$(document).height()},"slow")})});var m=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},n=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=o.current_location.lat,e=o.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},o=new m,p=new n;$(document).ready(function(){o.init(function(){p.init(),p.search("sushi")})});var q=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},r=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=s.current_location.lat,e=s.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},s=new q,t=new r;$(document).ready(function(){s.init(function(){t.init(),t.search("sushi")})});var u=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},v=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=w.current_location.lat,e=w.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},w=new u,x=new v;$(document).ready(function(){w.init(function(){x.init(),x.search("sushi")})});var y=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},z=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=A.current_location.lat,e=A.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},A=new y,B=new z;$(document).ready(function(){A.init(function(){B.init(),B.search("sushi")})});var C=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},D=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=E.current_location.lat,e=E.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},E=new C,F=new D;$(document).ready(function(){E.init(function(){F.init(),F.search("sushi")})});var G=function(){function a(a){console.log(a),k()}function b(){}function c(a,b){i.current_location.lat=a,i.current_location.lon=b}function d(d){var e=new google.maps.Geocoder;e.geocode(d,function(d,e){if(e!=google.maps.GeocoderStatus.OK)return b();if(d[1])d=d[1];else if(d[0])d=d[0];else return b();console.log(d.geometry.location),a(d.formatted_address),i.current_location||c(d.geometry.location.lat(),d.geometry.location.lng()),console.log(i)})}function e(a,b){c(a,b);var e=new google.maps.LatLng(a,b);d({"latLng":e})}function f(a){d({"address":a})}function g(a){console.log(a),e(a.coords.latitude,a.coords.longitude)}function h(a){k=a,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,b):b()}var i={},j="http://maps.googleapis.com/maps/api/",k=function(){};return i.current_location={},i.geolocation=f,i.init=h,i},H=function(){function a(){return h}function b(){}function c(){}function d(a,b){a=a.query.results.Result;for(var c in a){var d=a[c],e={"lat":d.Latitude,"lon":d.Longitude,"name":d.Title,"category":b,"result":d};h.push(e)}}function e(a){var c=I.current_location.lat,e=I.current_location.lon;YUI().use("node","yql",function(f){f.YQL('SELECT * FROM local.search WHERE query="'+a+'" and latitude="'+c+'" and longitude="'+e+'"',function(c){c.query.results.count==0&&b(),d(c,a)})})}function f(){}var g={},h=[];return g.get_list=a,g.search=e,g.init=f,g},I=new G,J=new H;$(document).ready(function(){I.init(function(){J.init(),J.search("sushi")})});var K=function(){function a(a){console.log(a)}function b(){}function c(c){var d=new google.maps.Geocoder;d.geocode(c,function(c,d){d==google.maps.GeocoderStatus.OK?c[1]?a(c[1].formatted_address):c[0]?a(c[0].formatted_address):b():b()})}function d(a,b){var d=new google.maps.LatLng(parseFloat(a),parseFloat(b));c({"latLng":d})}function e(a){c({"address":a})}function f(a){console.log(a),d(a.coords.latitude,a.coords.longitude)}function g(){navigator.geolocation?navigator.geolocation.getCurrentPosition(f,b):b()}var h={},i="http://maps.googleapis.com/maps/api/";return h.geolocation=e,h.init=g,h},L=new K;$(document).ready(function(){L.init()});var M=function(){function a(a){console.log(a)}function b(){}function c(c){var d=new google.maps.Geocoder;d.geocode(c,function(c,d){d==google.maps.GeocoderStatus.OK?c[1]?a(c[1].formatted_address):c[0]?a(c[0].formatted_address):b():b()})}function d(a,b){var d=new google.maps.LatLng(parseFloat(a),parseFloat(b));c({"latLng":d})}function e(a){c({"address":a})}function f(a){console.log(a),d(a.coords.latitude,a.coords.longitude)}function g(){navigator.geolocation?navigator.geolocation.getCurrentPosition(f,b):b()}var h={},i="http://maps.googleapis.com/maps/api/";return h.geolocation=e,h.init=g,h},N=new M;$(document).ready(function(){N.init()});